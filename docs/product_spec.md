# 家事共有アプリ「Kajimiru」プロダクト仕様

## 1. プロダクト概要
Kajimiru は家族やチームが家事・雑務を可視化し、誰がいつ何を行ったのかを簡単に記録・共有できる iPhone 向けアプリです。登録した家事は複数のグループ（自宅、事務所など）で共有・共同編集でき、週次・月次の担当比率を自動で可視化します。

## 2. ユースケース
- 家族全員で家事の抜け漏れを防ぎたい。
- 同居人やパートナーとの家事分担を公平にしたい。
- 事務所やシェアハウスの雑務の見える化をしたい。

## 3. ペルソナ
- **家族世帯の親**: 夫婦で家事を分担したい。子どもも巻き込みたい。
- **シェアハウスの住人**: 住人全員で掃除やゴミ出しなどを調整したい。
- **小規模オフィスのスタッフ**: 日々の雑務（備品補充や掃除当番）を公平に回したい。

## 4. 機能要件
### 4.1 家事マスター管理
- 家事の新規登録、編集、削除。
- 家事には「タイトル」「大変度」「備考」などのメタ情報を付与。
- 家事マスターはグループ内で共有。

### 4.2 実績記録
- 家事ごとに「担当者」「実施日時」「メモ」「大変度」を記録。
  - 大変度は家事に示されているものをそのまま記録してユーザーには入力させない(途中で大変度が変わったとき過去の集計値に影響が出ないようにする)
- すぐ入力できるクイック記録 UI（よく使う家事や担当をプリセット）。
- 過去記録の編集・削除。

### 4.3 分析・可視化
- 週次／月次で担当者ごとの家事比率（大変度）を円グラフで表示。

### 4.4 グループ・共有
- グループの作成・招待（招待リンクまたはコード）。
- 権限設定：管理者／編集者。
- 複数グループの切り替え（自宅、事務所など）。
- グループごとに家事マスター・記録を共有・共同編集。

### 4.5 通知・リマインド
- 分担が偏った場合のアラート。

### 4.6 オフライン対応
- オフラインでも記録でき、接続時に同期。

## 5. 非機能要件
- iOS 16 以降の iPhone をサポート。
- グループデータはクラウド同期（Firebase/CloudKit など）。
- 認証は Apple / Google / メール（Magic Link）。
- 端末内データは暗号化し、通信は HTTPS。

## 6. 情報設計
### 6.1 データモデル（例）
- `User`: id, name, email, avatarURL.
- `Group`: id, name, icon, members[].
- `Chore`: id, groupId, title, weight, notes.
- `ChoreLog`: id, choreId, performerId, weight, memo.

### 6.2 グループ・権限
| 権限 | 機能 |
| --- | --- |
| 管理者 | グループ設定、メンバー管理、家事マスター管理、記録編集 |
| 編集者 | 家事マスター管理、記録追加・編集 |

## 7. 画面設計（ハイレベル）
1. **オンボーディング／サインイン**: 認証、グループ参加または新規作成。
2. **ダッシュボード**: 担当比率サマリーを週次／月次で表示。
3. **家事一覧**: 家事マスターの一覧、フィルタ・ソート、追加／編集モーダル。
4. **記録画面**: クイック記録、履歴の一覧、詳細編集。
6. **グループ設定**: メンバー管理、通知設定、権限編集。

## 8. アーキテクチャ
- **クライアント**: SwiftUI + Combine。データ管理は The Composable Architecture (TCA) または MVVM。
- **バックエンド**: Firebase（Authentication, Firestore, Cloud Functions）または Appwrite。リアルタイム同期が必要な場合は Firestore 推奨。
- **分析処理**: Firestore 集計 + Cloud Functions で定期的に統計を生成。端末側で期間集計を補助。
- **通知**: Firebase Cloud Messaging + iOS Push Notifications。予定ベースは Cloud Functions、偏り検知は統計に基づくトリガー。

## 9. 技術スタック
- Swift 5.7+, SwiftUI, Combine, WidgetKit（ホームウィジェット対応）。
- Firebase Authentication / Firestore / Cloud Functions / Cloud Storage。
- Charts フレームワークでグラフ表示。
- Fastlane + GitHub Actions で CI/CD。

## 10. 開発ロードマップ（例）
1. **MVP**
   - 認証、グループ作成。
   - 家事マスター登録・編集・削除。
   - 家事記録の追加・編集・削除。
   - 週次サマリー（大変度ベース）の表示。
2. **Iteration 2**
   - 月次サマリー。
   - 通知機能、クイック記録 UI。
3. **Iteration 3**
   - 権限ロール

## 11. 成功指標（KPI）
- 週次アクティブグループ数。
- 家事記録の平均投稿数／グループ／週。
- 家事分担比率の改善（アンケートまたはセルフレポート）。

## 12. 今後の検討事項
- ゲーミフィケーション（バッジ、ポイント）。
- AI レコメンド（偏り解消提案）。
- カレンダー連携、Siri ショートカット対応。
